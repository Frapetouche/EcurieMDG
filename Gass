from flask import Flask, request, abort
from linebot import LineBotApi, WebhookHandler
from googletrans import Translator
import json

translator = Translator()
line_bot_api = LineBotApi('your channel access token')
webhookHandler = WebhookHandler('your secret key')

app = Flask(__name__)

@app.route('/callback', methods=['POST'])
def callback():
    data = json.loads(request.data)
    replying_token = data["events"][0]["replyToken"]
    log_text = data["events"][0]["source"]["userId"]
    
    reply_text = ""
    if "/start" in data["messages"][0]["message"]["text"]:
Reply_text = "Welcome to my assistant!"
elif "stop" in data["messages"][0]["message"]["text"]: Reply_text = "Goodbye!"
else:
Translate text = translator.translate(data["messages"][0]["message"]["text"), src=
language_code, dest='en').text)
Reply_text = f"Your translated text is: {translate_text}"

Line Bot Api Send Text Message
line_bot_api.push_message(reply_text, log_text)
return "OK"
@app.errorhandler(Exception)
def error handler(error):
Abort(str(error), 500)
if __name__ == "__main__": app.run(port=5000)
